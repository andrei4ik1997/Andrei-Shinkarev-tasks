(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){var t=[String(e.getHours()),String(e.getMinutes()),String(e.getSeconds())];return Number(t[0])<10&&(t[0]="0"+t[0]),Number(t[1])<10&&(t[1]="0"+t[1]),Number(t[2])<10&&(t[2]="0"+t[2]),t.join(":")}e.d({},{h:()=>q});var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],r="http://localhost:3000";function c(e){return e.getDate()+" "+a[e.getMonth()]+" "+e.getFullYear()}var o=function(){function e(){this.calendar=document.querySelector(".calendar"),this.calendarDays=document.querySelector(".calendar__days"),this.spinner=document.createElement("img")}return e.prototype.create=function(){this.calendarDays.style.display="none",this.spinner.src="./images/spinner.svg",this.spinner.style.width="300px",this.spinner.style.height="300px",this.calendar.append(this.spinner)},e.prototype.remove=function(){this.spinner.remove(),this.calendarDays.style.display="flex"},e}(),i=function(){function e(){this.deleteButton=document.querySelector(".scheduler__button"),this.schedulerNotes=document.querySelector(".scheduler__notes"),this.spinner=document.createElement("img")}return e.prototype.create=function(){this.schedulerNotes.style.display="none",this.spinner.src="./images/spinner.svg",this.spinner.style.width="50px",this.spinner.style.height="50px",this.deleteButton.before(this.spinner)},e.prototype.remove=function(){this.spinner.remove(),this.schedulerNotes.style.display="block"},e}(),d=function(){function e(){this.weather=document.querySelector(".weather"),this.weatherDaily=document.querySelector(".weather__daily"),this.weatherToday=document.querySelector(".weather__header"),this.spinner=document.createElement("img")}return e.prototype.create=function(){this.weatherDaily.style.display="none",this.weatherToday.style.display="none",this.spinner.src="./images/spinner.svg",this.spinner.style.width="300px",this.spinner.style.height="300px",this.weather.append(this.spinner)},e.prototype.remove=function(){this.spinner.remove(),this.weatherDaily.style.display="flex",this.weatherToday.style.display="block"},e}();function s(e){var t=e.divClass,n=void 0===t?"":t,a=e.innerText,r=void 0===a?"":a,c=e.parentDiv,o=void 0===c?"calendar__days":c,i=document.createElement("div");i.className=n,i.innerText=String(r),document.querySelector("."+o).append(i)}var l=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,c=t.length;r<c;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},u=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,c=t.length;r<c;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},y={method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}},_=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,c=t.length;r<c;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))};function h(e){var t=new i;t.create(),fetch(r+"/notes").then((function(e){return e.json()})).then((function(n){t.remove(),f({posts:n,date:e})})).catch((function(e){return console.log(e)}))}var f=function(e){var t=e.posts,n=e.date;document.querySelector(".scheduler__notes").innerHTML="";var a=t.filter((function(e){return e.year===n.getFullYear()&&e.month===n.getMonth()&&e.day===n.getDate()}));a.length?a.forEach((function(e){var t=document.createElement("div");t.className="scheduler__notes-note note",t.id=String(e.id),t.innerHTML='<div class="note__text">'+e.value+'</div>\n      <button class="note__icon note__icon_trash">\n        <i id='+e.id+' class="fas fa-trash" data-action="trash"></i>\n      </button>\n      <button class="note__icon note__icon_edit">\n        <i id='+e.id+' class="far fa-edit" data-action="edit"></i>\n      </button>',document.querySelector(".scheduler__notes").append(t)})):s({divClass:"scheduler__notes-empty",innerText:"No tasks today",parentDiv:"scheduler__notes"}),document.querySelectorAll(".note").forEach((function(e){e.addEventListener("click",(function(e){var a=e.target;switch(a.dataset.action){case"trash":!function(e){var t=e.date;fetch(r+"/notes/"+e.id,y).then((function(e){return e.json()})).then((function(){return h(t)})).catch((function(e){return console.log(e)}))}({date:n,id:Number(a.id)});break;case"edit":!function(e){var t=e.posts,n=e.date,a=e.id,c=n.getDate(),o=n.getMonth(),i=n.getFullYear(),d=document.querySelector(".scheduler__notes"),s=t.findIndex((function(e){return e.id===+a})),l=document.getElementById(String(a));l.innerHTML="<input class=\"note__text\" type='text' value="+t[s].value+'>\n    <button class="note__icon note__icon_check" >\n        <i class="fas fa-check" data-action="check"></i>\n    </button>\n     <button class="note__icon note__icon_cancel" >\n        <i class="fas fa-times" data-action="cancel"></i>\n    </button>';var u=l.querySelector(".note__text");u.focus(),u.selectionStart=u.value.length,d.addEventListener("click",(function(e){switch(e.target.dataset.action){case"check":fetch(r+"/notes/"+a,function(e){var t=e.id,n=e.value,a={day:e.day,month:e.month,year:e.year,value:n,id:t};return{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(a)}}({id:a,day:c,month:o,year:i,value:u.value})).then((function(e){return e.json()})).then((function(){return h(n)})).catch((function(e){return console.log(e)}));break;case"cancel":h(n)}}))}({posts:t,date:n,id:Number(a.id)})}}))}))};function m(){document.querySelector(".calendar__clockDate").innerText=""+c(new Date);var e=new o;e.create(),fetch(r+"/db").then((function(e){return e.json()})).then((function(t){var a=t.config,r=t.restDays,o=t.notes,i=[];for(var d in a){var y=Object.values(a[d]);i.push(y)}var f=Object.fromEntries(i),m=f.firstDayWeek,p=f.firstHoliday,v=f.secondHoliday,g=f.showLastDays,w=f.showNextDays,S=f.scheduler;e.remove(),function(e){var t=e.firstDayWeek,n=e.firstHoliday,a=e.secondHoliday,r=e.showLastDays,c=e.showNextDays,o=e.scheduler,i=document.querySelector(".settings__select_first-day"),d=document.querySelector(".settings__holidayFirst"),s=document.querySelector(".settings__holidaySecond"),l=document.querySelector(".settings__input_lastDays"),u=document.querySelector(".settings__input_nextDays"),y=document.querySelector(".settings__input_scheduler");i.value=t,d.value=n,s.value=a,l.checked=r,u.checked=c,y.checked=o}(f),function(e){document.querySelector(".calendar__daysOfWeek").innerHTML="";var t=function(e){e.forEach((function(e){s({divClass:"calendar__daysOfWeekDay",parentDiv:"calendar__daysOfWeek",innerText:e.substr(0,3)})}))};switch(e){case n[0]:t(n);break;case n[1]:t(u(u([n[1]],n.slice(2,7),!0),[n[0]],!1))}}(m),function(e){var t,a=e.date,r=e.firstDayWeek,c=e.restDays,o=e.notes,i=document.querySelector(".calendar__days"),d=document.querySelector(".calendar__dateDay"),l=document.querySelector(".calendar__dateMonth"),u=document.querySelector(".calendar__dateYear"),y=a.getFullYear(),_=a.getMonth(),h=a.getDate(),f=new Date(y,_+1,0).getDate(),m=new Date(y,_,0).getDate(),p=new Date(y,_,0).getDay(),v=new Date(y,_+1,0).getDay();t=f+p<35?14-v:7-v;var g=c.filter((function(e){return e.month===_+1})).map((function(e){return e.day})),w=o.filter((function(e){return e.month===_&&e.year===y})).map((function(e){return e.day})),S=o.filter((function(e){return e.month===_-1&&e.year===y})).map((function(e){return e.day})),D=o.filter((function(e){return e.month===_+1&&e.year===y})).map((function(e){return e.day}));if(i.innerHTML="",d.value=String(h),l.value=String(_),u.value=String(y),r===n[1]){for(var x=0;x<p;x++){var T=m-(p-1)+x;S.includes(T)?s({divClass:"calendar__day calendar__day_to-do calendar__day_prev-mounth-day ",innerText:T}):s({divClass:"calendar__day calendar__day_prev-mounth-day",innerText:T})}for(x=1;x<=f;x++)x===h?w.includes(x)?s({divClass:"calendar__day calendar__day_today calendar__day_to-do",innerText:x}):s({divClass:"calendar__day calendar__day_today ",innerText:x}):w.includes(x)?s({divClass:"calendar__day calendar__day_to-do",innerText:x}):g.includes(x)?s({divClass:"calendar__day calendar__day_holiday",innerText:x}):s({divClass:"calendar__day",innerText:x});for(x=1;x<=t;x++)D.includes(x)?s({divClass:"calendar__day calendar__day_to-do calendar__day_next-mounth-day ",innerText:x}):s({divClass:"calendar__day calendar__day_next-mounth-day",innerText:x})}if(r===n[0]){for(x=0;x<=p;x++)T=m-p+x,S.includes(T)?s({divClass:"calendar__day calendar__day_to-do calendar__day_prev-mounth-day",innerText:T}):s({divClass:"calendar__day calendar__day_prev-mounth-day",innerText:T});for(x=1;x<=f;x++)x===h?w.includes(x)?s({divClass:"calendar__day calendar__day_today calendar__day_to-do",innerText:x}):s({divClass:"calendar__day calendar__day_today ",innerText:x}):w.includes(x)?s({divClass:"calendar__day calendar__day_to-do",innerText:x}):g.includes(x)?s({divClass:"calendar__day calendar__day_holiday",innerText:x}):s({divClass:"calendar__day",innerText:x});for(x=1;x<t;x++)D.includes(x)?s({divClass:"calendar__day calendar__day_to-do calendar__day_next-mounth-day",innerText:x}):s({divClass:"calendar__day calendar__day_next-mounth-day",innerText:x})}}({date:q,firstDayWeek:m,restDays:r,notes:o}),function(e){var t=e.firstHoliday,a=e.secondHoliday,r=e.firstDayWeek,c=document.querySelector(".calendar__days").children,o=null,i=null;switch(r){case n[0]:o=n.findIndex((function(e){return e===t})),i=n.findIndex((function(e){return e===a}));break;case n[1]:var d=l(l([n[1]],n.slice(2,7),!0),[n[0]],!1);o=d.findIndex((function(e){return e===t})),i=d.findIndex((function(e){return e===a}))}for(var s=o;s<c.length;s+=7)c[s].classList.add("calendar__day_holiday");for(s=i;s<c.length;s+=7)c[s].classList.add("calendar__day_holiday")}({firstHoliday:p,secondHoliday:v,firstDayWeek:m}),function(e){var t=e.showNextDays,n=function(e){var t=e.selector;Array.from(document.querySelectorAll(""+t)).forEach((function(e){e.style.visibility="hidden"}))};e.showLastDays||n({selector:".calendar__day_prev-mounth-day"}),t||n({selector:".calendar__day_next-mounth-day"})}({showLastDays:g,showNextDays:w}),S&&function(e){var t=Array.from(document.querySelectorAll(".calendar__day")),n=document.querySelector(".scheduler__date"),a=document.querySelector(".scheduler"),r=null;t.forEach((function(t){return t.addEventListener("click",(function(t){var o=t.target,i=o.classList;a.classList.add("show"),_([],i,!0).includes("calendar__day_prev-mounth-day")?(r=new Date(e.getFullYear(),e.getMonth()-1,+o.innerText),n.innerText=""+c(r)):_([],i,!0).includes("calendar__day_next-mounth-day")?(r=new Date(e.getFullYear(),e.getMonth()+1,+o.innerText),n.innerText=""+c(r)):(r=new Date(e.getFullYear(),e.getMonth(),+o.innerText),n.innerText=""+c(r)),h(r)}))}))}(q)})).catch((function(e){return console.log(e)}))}var p=function(e){var t=e.idValue,n=e.value;fetch(r+"/config/"+t,function(e){var t={id:e.idValue,idValue:e.value};return{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}}({idValue:t,value:n})).then((function(e){return e.json()})).then((function(){return m()})).catch((function(e){return console.log(e)}))};function v(){var e=new d;e.create(),fetch("https://api.openweathermap.org/data/2.5/onecall?lat=53.8931&lon=30.3325&lang=en&units=metric&exclude=hourly,minutely&appid=e9cb0113e83d5fb7d38d6909b07913cf ").then((function(e){return e.json()})).then((function(r){var o,i,d,s,l;e.remove(),s=(o=r).current,l=o.daily,function(e){var n=e.dt,a=e.temp,r=e.weather,o=e.feels_like,i=e.wind_speed,d=e.humidity,s=e.pressure,l=r[0],u=l.icon,y=l.description,_=new Date(1e3*n),h="http://openweathermap.org/img/w/"+u+".png",f=document.querySelector(".weather__date"),m=document.querySelector(".weather__tempValue"),p=document.querySelector(".weather__iconImage"),v=document.querySelector(".weather__description"),g=document.querySelector(".weather__feelsLikeValue"),w=document.querySelector(".weather__windSpeedValue"),S=document.querySelector(".weather__humidityValue"),D=document.querySelector(".weather__pressureValue"),x=100*s/133.3224;f.innerText=c(_)+" "+t(_),"number"==typeof a&&"number"==typeof o&&(m.innerHTML=Math.round(a)+"&deg",g.innerHTML=Math.round(o)+"&deg"),p.src=h,v.innerText=y,w.innerText=i+" metre/sec",S.innerText=d+" %",D.innerText=Math.round(x)+" mmHg"}(s),i=l,(d=document.querySelector(".weather__daily")).innerHTML="",i.forEach((function(e){if("number"!=typeof e.temp){var t=e.dt,r=e.temp,c=r.day,o=r.night,i=e.weather[0],s=i.icon,l=i.main,u=new Date(1e3*t),y="http://openweathermap.org/img/w/"+s+".png",_=document.createElement("div");_.className="weather__day",_.innerHTML='<div class="weather__day-week">'+n[u.getDay()].slice(0,3)+'</div>\n      <div class="weather__date">'+u.getDate()+" "+a[u.getMonth()]+'</div>\n      <div class="weather__icon weather__icon_marginTopBottom10px">\n      <img class="weather__iconImage" src='+y+' alt="Weather icon" />\n      </div>\n      <div class="weather__temp-day">\n      Day: <span class="weather__temp-day-value">'+Math.round(c)+'&deg</span>\n      </div>\n      <div class="weather__temp-night">\n      Night: <span class="weather__temp-night-value">'+Math.round(o)+'&deg</span>\n      </div>\n      <div\n        class="weather__description"\n      >'+l+"\n      </div>",d.append(_)}}))})).catch((function(e){return console.log(e)}))}var g,w,S,D,x,T,q=new Date,b=document.querySelector(".calendar__clockTime");m(),document.querySelector(".settings").addEventListener("change",(function(e){var t=e.target,n=t.id,a=t.checked,r=t.value,c=n;switch(c){case"showLastDays":case"showNextDays":case"scheduler":p({idValue:c,value:a});break;case"firstDayWeek":case"firstHoliday":case"secondHoliday":p({idValue:c,value:r})}})),g=document.querySelector(".calendar__clock"),w=document.querySelector(".calendar__dateContainer"),S=document.querySelector(".calendar__dateControls"),g.addEventListener("click",(function(){q.setDate((new Date).getDate()),q.setMonth((new Date).getMonth()),q.setFullYear((new Date).getFullYear()),m()})),w.addEventListener("change",(function(e){var t=e.target,n=+t.value;switch(t.dataset.action){case"day":q.setDate(n);break;case"month":q.setMonth(n);break;case"year":q.setFullYear(n)}m()})),S.addEventListener("click",(function(e){switch(e.target.dataset.action){case"prevMonth":q.setMonth(q.getMonth()+1),m();break;case"nextMonth":q.setMonth(q.getMonth()-1),m()}})),(D=document.querySelector(".scheduler__form")).addEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector(".form__input"),n=document.querySelector(".scheduler__date").innerText.split(" "),c=new Date(+n[2],a.findIndex((function(e){return e===n[1]})),+n[0]),o={day:c.getDate(),month:c.getMonth(),year:c.getFullYear(),value:t.value};fetch(r+"/notes",function(e){return{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}}(o)).then((function(e){return e.json()})).then((function(){D.reset(),h(c)})).catch((function(e){return console.log(e)}))})),document.querySelector(".scheduler__button").addEventListener("click",(function(){Array.from(document.querySelectorAll(".fa-trash")).forEach((function(e){return e.click()}))})),x=document.querySelector(".scheduler__close"),T=document.querySelector(".scheduler"),x.addEventListener("click",(function(){T.classList.remove("show"),m()})),v(),b.innerHTML=t(new Date),setInterval((function(){b.innerHTML=t(new Date)}),1e3),setInterval((function(){return v()}),6e4)})();